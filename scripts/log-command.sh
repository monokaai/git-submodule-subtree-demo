#!/bin/bash
# ã‚³ãƒžãƒ³ãƒ‰å®Ÿè¡Œãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ 
# ä½¿ç”¨æ–¹æ³•: ./scripts/log-command.sh "æ„å›³ãƒ»ç›®çš„" "å®Ÿè¡Œã™ã‚‹ã‚³ãƒžãƒ³ãƒ‰"

INTENT="$1"
COMMAND="$2"
LOG_FILE="docs/commands.md"
TIMESTAMP=$(date '+%Y-%m-%d %H:%M:%S')

# ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯åˆæœŸåŒ–
if [ ! -f "$LOG_FILE" ]; then
    cat > "$LOG_FILE" <<'EOF'
# å®Ÿè¡Œã‚³ãƒžãƒ³ãƒ‰ãƒ­ã‚°

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€git submodule/subtree ãƒ‡ãƒ¢ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å®Ÿè¡Œã—ãŸå…¨ã‚³ãƒžãƒ³ãƒ‰ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ã‚³ãƒžãƒ³ãƒ‰å±¥æ­´

EOF
fi

# ãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒªã‚’è¿½åŠ 
cat >> "$LOG_FILE" <<EOF

### [$TIMESTAMP] $INTENT

\`\`\`bash
$COMMAND
\`\`\`

EOF

echo "ðŸ“ ã‚³ãƒžãƒ³ãƒ‰ãƒ­ã‚°ã«è¨˜éŒ²: $INTENT"
